<!-- discussion-detail.html -->
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Diskusi - Fakultas Ilmu Komputer</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">
    <header>
        <div id="header"></div>
    </header>

    <section class="container mx-auto p-8 bg-white rounded-lg shadow-lg mt-8">
        <h2 class="text-3xl font-bold mb-4 text-blue-900 text-center">Detail Diskusi</h2>
        <p class="text-center text-gray-700 mb-8">Deskripsi Topik Diskusi</p>

        <!-- Main Discussion Comment with Edit and Delete Options -->
        <div class="bg-white shadow-lg rounded-lg p-6 mb-4 relative">
            <p class="text-blue-900 font-semibold">Admin</p>
            <p class="text-gray-700 mt-2">Apa pendapat Anda tentang perkembangan teknologi AI saat ini? Bagaimana AI dapat mengubah industri di masa depan?</p>
            <p class="text-gray-500 text-sm mt-4">Diposting 3 hari yang lalu</p>

            <!-- Check if the current user is the creator of this topic -->
            <div id="editDeleteOptions" class="absolute top-4 right-4 flex gap-2 hidden">
                <button id="editTopicButton" class="text-blue-600 hover:underline text-sm">Edit</button>
                <button id="deleteTopicButton" class="text-red-600 hover:underline text-sm">Hapus</button>
            </div>
        </div>

        <!-- Replies Section -->
        <div class="bg-gray-50 rounded-lg p-4 mb-8">
            <h3 class="text-xl font-bold text-blue-900 mb-4">Balasan</h3>
            <div class="space-y-4">
                <div class="bg-white shadow rounded-lg p-4">
                    <p class="text-blue-900 font-semibold">Mahasiswa 1</p>
                    <p class="text-gray-700 mt-2">AI memiliki potensi besar untuk mengotomatisasi tugas-tugas yang repetitif dan memungkinkan analisis data yang lebih mendalam.</p>
                    <p class="text-gray-500 text-sm mt-4">Diposting 2 hari yang lalu</p>
                    <!-- Reply Button -->
                    <button class="text-blue-600 hover:underline text-sm">Reply</button>
                </div>
                <!-- Other Replies... -->
            </div>
        </div>

        <!-- Form to Add a New Reply -->
        <h3 class="text-xl font-bold text-blue-900 mb-4">Tulis Balasan</h3>
        <form id="new-reply-form" class="bg-gray-200 p-6 rounded-lg mb-8">
            <textarea id="newReply" name="newReply" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Tulis balasan Anda..."></textarea>
            <div class="flex justify-end mt-4">
                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md shadow-sm hover:bg-blue-700">Kirim</button>
            </div>
        </form>
    </section>

    <footer>
        <div id="footer"></div>
    </footer>

    <!-- JavaScript for Checking Topic Ownership and CRUD Operations -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Assuming user data is available in a global variable or fetched from API
            const currentUserId = 'USER_ID'; // Replace with actual user ID from session or API
            const topicOwnerId = 'TOPIC_OWNER_ID'; // Replace with actual topic owner ID from API or data attribute

            // Show edit and delete buttons only if the current user is the owner of the topic
            if (currentUserId === topicOwnerId) {
                document.getElementById('editDeleteOptions').classList.remove('hidden');
            }

            document.getElementById('editTopicButton').addEventListener('click', function() {
                alert('Edit topic clicked.');
                // Implement the edit logic here
            });

            document.getElementById('deleteTopicButton').addEventListener('click', function() {
                if (confirm('Apakah Anda yakin ingin menghapus topik ini?')) {
                    alert('Topik telah dihapus.');
                    // Implement the delete logic here (AJAX or form submission)
                }
            });

            document.getElementById('new-reply-form').addEventListener('submit', function(event) {
                event.preventDefault();
                alert('Balasan telah dikirim.');
                // Implement the reply logic here (AJAX or form submission)
            });

            // Load header and footer
            fetch('headeradmin.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header').innerHTML = data;
                })
                .catch(error => console.error('Error loading header:', error));

            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer').innerHTML = data;
                })
                .catch(error => console.error('Error loading footer:', error));
        });
    </script>
</body>
</html>
